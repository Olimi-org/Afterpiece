version: "3"

includes:
  common: ../Taskfile.yml

tasks:
  build:
    summary: Builds all macOS binaries
    deps:
      - task: common:setup
    cmds:
      - task: build:amd64
      - task: build:arm64

  build:cli:
    summary: Builds only the main CLI for macOS
    deps:
      - task: build

  build:amd64:
    summary: Builds for macOS AMD64
    deps:
      - task: common:build:platform
        vars:
          PLATFORM: darwin
          ARCH: amd64

  build:arm64:
    summary: Builds for macOS ARM64
    deps:
      - task: common:build:platform
        vars:
          PLATFORM: darwin
          ARCH: arm64