version: "3"

includes:
  common: ../Taskfile.yml

tasks:
  build:
    summary: Builds all Linux binaries
    deps:
      - task: common:setup
    cmds:
      - task: build:amd64
      - task: build:arm64

  build:cli:
    summary: Builds only the main CLI for Linux
    deps:
      - task: build

  build:amd64:
    summary: Builds for Linux AMD64
    deps:
      - task: common:build:platform
        vars:
          PLATFORM: linux
          ARCH: amd64

  build:arm64:
    summary: Builds for Linux ARM64
    deps:
      - task: common:build:platform
        vars:
          PLATFORM: linux
          ARCH: arm64